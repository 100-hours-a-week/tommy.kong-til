# 02-04(화) 강의

## NumPy 개요

NumPy는 **대규모 다차원 배열 및 연산**을 위한 **고성능 수학 함수와 도구**를 제공하는 파이썬 라이브러리이다.

- 파이썬 라이브러리로, `pip`을 통해 설치 가능
- 대규모 다차원 배열(ndarray)과 행렬(matrix)을 처리할 수 있는 고성능 **데이터 구조** 제공
- **수학 연산, 선형대수, 통계, 변환, 기본적인 수치 계산**을 지원하는 다양한 함수 포함
- NumPy를 사용하는 이유: 대규모 수치 데이터를 **빠르고 메모리 효율적**으로 처리하기 위함
  - **효율적**: 시간복잡도와 공간복잡도(메모리 사용) 모두 최적화 가능
- **고성능 다차원 배열 객체와 다양한 수학적 연산 기능 제공**

---

## 차원 (Dimensions)

### 정의
차원은 배열에서 데이터를 구성하는 축(axis)의 개수를 의미한다.

- **스칼라** = 0차원 배열
- **벡터** = 1차원 배열 (축이 1개)
- **행렬** = 2차원 배열 (축이 2개)
- **텐서** = 3차원 배열 이상 (축이 3개 이상)

### 차원의 개념
- **차원**: 사물이나 공간의 크기, 범위, 특징 등을 나타내는 **측정 가능한 속성**
  - 측정 가능 → 수로 표현할 수 있음
  - 속성 → 대상이 가진 성질
- 배열의 차원은 데이터의 **구조를 이해하는 핵심 요소**이며, 연산의 효율성에도 영향을 미친다.

---

## 형태 (Shape)

- 배열의 각 차원별 요소 개수를 나타내는 **튜플(tuple)**
- **크기(size)**: 배열의 총 원소 개수 (불변)
- **차원(ndim)**: 배열의 축(axis) 개수 (변환 가능)
- 차원 변환 시 **크기는 보존되어야 한다.**
- 불변량 (Invariant): 변환 전후로 바뀌지 않는 값
- 부족한 부분을 자동으로 채워주는 것을 **패딩(padding)**이라고 한다.

---

## 데이터 타입 (Data Type)

NumPy는 **C 언어 기반**으로 내부 구현되어 있으며, 데이터 타입을 보다 세분화하여 제공한다.

- 데이터 타입 확인: `dtype`
- 데이터 타입 변환 가능 (`astype` 활용)
- **차원, 형태, 데이터 타입은 변환 가능하지만, 배열의 크기는 불변**

---

## 인덱싱 (Indexing)과 슬라이싱 (Slicing)

### 인덱싱
- 배열 내 특정 요소를 **추출하는 과정**
- 배열 요소의 위치를 나타내는 정수값(색인, index)을 사용하여 원하는 값을 얻음
- `-1` 인덱스: `len(array) - 1` (역순 접근)

### 슬라이싱
- 배열의 특정 범위를 선택하는 방법
- 구문: `start:end:step` (끝 값은 포함되지 않음)
- 적극적으로 활용하면 코드의 가독성과 효율성을 높일 수 있음

### 기타 인덱싱 방법
- **Boolean Indexing**: 조건을 활용한 필터링
- **Fancy Indexing**: 리스트나 배열을 사용하여 여러 개의 특정 요소 선택
- **인덱싱을 활용한 데이터 수정**: 특정 위치의 요소 변경 가능

---

## 연산 (Operations)

- 식이 나타내는 일정한 규칙에 따라 계산하는 것
- 기본적으로 연산도 함수의 일종
- 주요 연산 종류:
  - **산술 연산** (+, -, *, / 등)
  - **비교 연산** (> , < , == 등)
  - **논리 연산** (and, or, not 등)
  - **통계 연산** (평균, 분산 등)
  - **선형대수 연산** (행렬 곱, 역행렬 등)
  - **브로드캐스팅(Broadcasting)**: 크기가 다른 배열 간 연산 지원

- **동일한 차원과 크기를 가지는 배열은 각 요소별 연산을 수행**
- **통계 연산**: 대표값(평균, 중앙값 등)을 추출하며, 결과가 **스칼라(Scalar)**로 반환됨
- **선형대수 연산**: 행렬 곱, 역행렬 계산 등 수학적 연산을 포함
- **브로드캐스팅**: 작은 배열을 확장하여 크기가 다른 배열 간 연산 가능

---

## 유니버설 함수 (Universal Function, ufunc)

### 정의
NumPy의 ufunc는 **배열의 모든 요소에 동일한 연산을 적용하는 기능**을 제공하는 함수이다.

- 벡터화된 연산을 지원하여 반복문 없이 효율적 연산 가능
- `np.add()`를 사용하는 것이 `+` 연산자보다 효율적

### 주요 유니버설 함수 종류
- **비교 연산**: `np.greater()`, `np.less()` 등
- **논리 연산**: `np.logical_and()`, `np.logical_or()` 등
- **비트 연산**: `np.bitwise_and()`, `np.bitwise_or()` 등
- **삼각 함수**: `np.sin()`, `np.cos()`, `np.tan()` 등
- **지수 및 로그 연산**: `np.exp()`, `np.log()` 등
- **브로드캐스팅과 결합 가능**: `np.add(array, scalar)`

### `out` 파라미터를 사용한 연산 결과 저장
```python
import numpy as np

a = np.array([1, 2, 3])
result = np.empty_like(a)
np.multiply(a, 2, out=result)
print(result)  # [2, 4, 6]
```
- `np.empty_like(a)`: 원본 배열과 동일한 형태의 빈 배열 생성
- 연산 결과를 `out` 파라미터를 이용하여 저장

---

# Pandas
- 데이터 분석에 초점을 맞춘 라이브러리
- 데이터 프레임과 시리즈를 조작하고 분석하는 기능 제공
- 다양한 데이터 소스와 호환 가능 (엑셀, CSV, SQL, JSON 등)

## Pandas vs NumPy
- Pandas는 행과 열을 기준으로 데이터 조작
- NumPy 기반으로 동작하지만 더 다양한 데이터 소스를 지원
- 시각화 및 데이터 가공이 더 편리함

## Pivot이란?
- 데이터를 특정 기준에 따라 재구성하는 작업
- 데이터 가공 관점에서 Pandas가 중요
- 딕셔너리를 사용하면 DataFrame 형태로 출력됨

---

## 시리즈(Series)
### Series란?
- 인덱스를 가지는 1차원 배열 형태의 데이터 구조
- 한 개의 열로 구성되며, 각 요소가 고유한 인덱스를 가짐
- Pandas의 데이터프레임을 구성하는 기본 요소

### Why use?
- 데이터의 가장 단순한 형태가 1차원 배열이기 때문
- 여러 개의 Series를 모으면 DataFrame이 됨
- 인덱스를 지정할 수 있어 딕셔너리와 유사
- 기본적으로 NumPy의 1차원 배열과 유사
- 슬라이싱 시 문자열 인덱스도 사용 가능

---

## 데이터프레임(DataFrame)
### DataFrame이란?
- 데이터를 담는 틀 역할
- Series는 한 종류의 데이터 타입을 가지지만, DataFrame은 여러 개의 Series로 구성됨
- 열(Column)은 데이터의 속성을 나타내고, 행(Row)은 데이터의 개별 항목을 나타냄

### 생성 방법
- **딕셔너리 기반 생성**
- **리스트 기반 생성 (메타데이터 지정)**
- **NumPy 배열을 활용한 생성**

### 데이터 선택 및 조작
- 특정 열 가져오기: `df['column_name']`
- 특정 행 가져오기: `df.loc[row_label]`, `df.iloc[row_index]`
- 그룹 연산: `df.groupby('column_name')`
- 람다식 (`lambda`): 머신러닝·딥러닝에서도 활용되는 중요한 문법

---

## 그룹핑 (Grouping)
- 데이터를 특정 기준으로 그룹화하여 집계, 변환, 필터링 등의 연산을 수행
- **과정:** 분할(Split) → 적용(Apply) → 결합(Combine)
- `df.groupby('column').agg({'column': 'sum'})` 등의 연산 수행 가능

---

## 데이터 병합 (Join & Merge)
### Join 종류
- **Inner Join**: 교집합 (일치하는 값만 포함)
- **Outer Join**: 합집합 (일치하지 않는 값은 `NaN`으로 표시)
- **Left Join**: 첫 번째 데이터프레임을 기준으로 유지
- **Right Join**: 두 번째 데이터프레임을 기준으로 유지

### `merge()`
- `pd.merge(left, right, how='방법', on='기준 컬럼')`
- 멀티 컬럼을 기준으로 병합 가능 (두 개의 컬럼 값이 모두 일치해야 함)
- 인덱스를 기준으로 병합 가능 (`left_index=True, right_index=True`)
- 병합 후 열 이름이 충돌하는 경우 접미사로 구분 가능
- 조건 기반 분석에 활용 가능

---

## `concat` vs `merge`
- **`concat()`**: 단순한 데이터 연결 (위/아래 또는 좌/우)
- **`merge()`**: 공통된 열을 기준으로 데이터를 병합


## 데이터프레임 - 미니퀘스트

## 결측치 처리
1. 해당 데이터 프레임에 Nan이 있는 지 우선 확인 
2. 분석 목적에 따라 버릴지 말지를 결정
3. 예측할 수 있는 값이면 `mice`등의 기법으로 예측값으로 대체 혹은 평균이나 중앙값으로 대체 

## 필터링 - 미니퀘스트 

## 피벗 
- 피벗을 수행할때 사용되는 주요 구성 요소
  - index
  - columns
  - values 

- 피벗 방식은 2가지만 제공됨 
  - `pivot() vs pivot_table()`
    - pivot는 중복된 값이 있을때 오류 발생, but pivot_table는 중복값이 있을 경우 집계함수를 적용하여 데이터를 요약할 수 있게함. 
- 피벗을 사용하는 이유는 데이터를 특정 기준에 따라 재구성하여 의미 있는 패턴을 발견하기 위해서임. 
  - 시각화와 재구성이 중요하다. 이 두가지 과정을 인사이트를 얻기 위해서이다. 
- `df.pivot(index=, columns=, values=)` 
  - 각각에는 컬럼이 들어간다. 
  - []을 통해 멀티 인덱스를 지정할 수 있다. 
- `pivot_table(index,col,values,aggfunc,fill_value)`
  - 중복된 데이터가 있을때 중복된 데이터에 대한 aggfunc과 결측값을 채울 fill_value를 지정해줄 수 있다. 
  - groupby() vs pivot()
    - aggfunc에 있어서 유사할 수 있지만 groupby는 split을 기본으로 하지만 pivot은 기존 축을 바꾸는 것이다.

## 중복 처리 
- 중복된 row을 제거 -> 나중에 나온 열을 제거한다.
- 특정 컬럼만 기준으로 제거도 가능 
  - `subset`으로 제약을 줄 수 있음. 
- 중복된 행이 있을 경우 첫번째 또는 마지막 값을 유지하거나 모든 중복을 제거할 수 있다. 
  - `keep = 'left'`, `keep='last'`, `keep=False`
- `duplicated`을 통해 중복 여부를 확인 가능 
- 여러 열을 조합하는 중복 제거 

## 문자연 처리 
- 데이터를 다룰 때 문자열을 다루는 경우가 많음. 
- 파이썬에 있는 대부분 문자열 처리 기법을 사용가능하다. 
- 정규표현식도 있지만 아주 기초는 공부하고 검색을 하는 것이 좋다. 
- lambda를 사용하여 func을 통해 처리도 가능 

---

# 개인 정리

## 한줄정리 개념 
1. Numpy: C언어를 기반으로 대규모 데이터 연산을 효율적으로 처리하기 위한 필수적인 파이썬 라이브러리
2. 차원 : 데이터의 구조적 복잡도를 나타내는 수
3. 형태: 데이터의 크기와 차원을 함께 나타내는 튜플 형태의 값
4. 인덱스: 컨테이너 형태의 자료구조에서 각 요소에 접근하기 위해 부여된 고유한 번호 또는 식별자
5. 유니버셜 함수: 배열의 각 요소에 빠르게 연산을 적용할 수 있는 Numpy의 함수 
6. Pandas: 테이블 형태의 데이터를 효율적으로 다루기 위한 파이썬 라이브러리
7. 시리즈: Pandas에서 1차원 배열 형태의 데이터를 다루는 기본 데이터 타입. 테이블의 한 열(col)에 해당
8. 데이터 프레임: 여러 시리즈를 열(col)로 구성하고, 행(row)을 통해 하나의 Index에 해당하는 여러 속성을 한번에  다룰 수 있는 테이블 형태의 Pandas 데이터 타입
9. 그룹화(Grouping): 데이터를 특정 기준에 따라 분할, 적용, 결합하는 과정을 통해 종합적인 계산을 수행하는 방법
10. 병합(Merging): 여러 테이블을 특정 키를 기준으로 합치는 작업
11. 피벗(Pivot): 테이블의 구조를 축 변경 등의 방법으로 재구성하여 테이블을 더 직관적이거나 목적에 맞게 표현하는 작업

